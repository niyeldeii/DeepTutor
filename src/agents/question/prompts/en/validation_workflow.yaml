validate: |
  Please validate the following question:

  Question:
  {question}

  {reference_section}

  Retrieved validation knowledge:
  {validation_knowledge}

  Please perform validation and output in JSON format:
  {{
      "decision": "approve" or "request_modification" or "request_regeneration",
      "issues": ["issue1", "issue2", ...],  # List of found issues
      "suggestions": ["suggestion1", "suggestion2", ...],  # List of modification suggestions
      "reasoning": "Detailed explanation of validation reasoning"
  }}

  Validation criteria:
  1. **Retrieved knowledge sufficiency (lenient judgment)**:
     - ⚠️ **Important**: Knowledge base may not contain basic/low-level knowledge points, as students are assumed to have mastered them
     - If question involves basic knowledge (e.g. vector dot product, magnitude, basic calculus formulas), but retrieved results are more advanced content, this is **acceptable**
     - **Judgment criterion**: Is retrieved knowledge related to the question's **core knowledge points**? If question tests application of advanced concepts and you retrieved that advanced concept, it should be accepted even without basic formulas
     - Only request regeneration when retrieved knowledge is **completely irrelevant** or **core knowledge points don't match**

  {innovation_section}

  2. **Knowledge level judgment**:
     - If retrieved knowledge is **higher level** than basic knowledge required by question, knowledge base assumes these basics are mastered
     - Example: Question uses vector dot product, retrieved multivariable calculus content → **acceptable** (calculus courses assume students know vectors)
     - Example: Question tests Lagrange multipliers, retrieved Lagrange multipliers → **acceptable** (even without basic partial derivative definition)

  3. Can answer be derived from retrieved knowledge? (Consider basic knowledge may not be in knowledge base)
  4. Do multiple choice questions have only one correct answer?
  5. Is question statement clear?
  6. Is explanation sufficient?
  7. If calculation involved, is result correct?

  **Validation principles**:
  - ✅ Be lenient with basic knowledge: If question uses basic knowledge but retrieved more advanced related content, should accept
  - ✅ Focus on core knowledge points: As long as question's core points are reflected in retrieval results, knowledge is sufficient
  - ✅ Questions that extend beyond KB content are valuable: They encourage broader learning
  - ❌ Still need to validate based on retrieval results: Cannot use your own knowledge, but can reasonably infer basics are mastered
  - ❌ Only request regeneration when completely irrelevant: Only require regeneration when retrieval results are **completely unrelated** to question's core content

  **Example judgments**:
  - ✅ Accept: Question uses vector operations + retrieved linear algebra advanced content
  - ✅ Accept: Question uses basic differentiation + retrieved multivariable calculus content
  - ✅ Accept: Question uses trigonometric functions + retrieved complex analysis content
  - ⚠️ Request modification (not regeneration): Question partially related but needs adjustment
  - ❌ Request regeneration: Question tests Lagrange multipliers + retrieved probability theory content (completely irrelevant)

innovation_section: |
  **Special check for mimicking questions**:
  - **Innovation check**: Compare the generated question with the reference question
  - ⚠️ **Insufficient innovation** - If only numbers/symbols changed while scenario, wording, structure, and solution process remain the same, or if the generator merely adds an explanation to the same statement, you MUST return request_modification or request_regeneration.
  - Examples of insufficient innovation:
    * Only changed coordinates from (1,2,3) to (4,5,6), everything else same
    * Only changed parameter from k to m, calculation process identical
    * Only swapped numerical values, question structure completely same
  - ⚠️ Adding explanations or extra words without changing the scenario/requirements does NOT count as innovation.
  - ✅ **Sufficient innovation** should include:
    * Changed geometric objects or mathematical structures
    * Changed calculation approach or solution method
    * Changed question scenario or context
    * Changed what is being solved for (e.g. from angle to projection)
  - If innovation is insufficient, add to issues: "Insufficient innovation: only data changed, scenario and process identical to reference"

relevance_analysis: |
  Analyze the relevance between the following exam question and the knowledge base content.

  Question:
  {question}

  Knowledge Base Content:
  {knowledge}

  Please analyze and provide a JSON response:
  {{
      "relevance": "high" or "partial",
      "kb_coverage": "Describe specifically what concepts, theories, or methods from the knowledge base this question tests.",
      "extension_points": "If relevance is 'partial', describe what aspects extend beyond the knowledge base. Leave empty if 'high'."
  }}

  Guidelines:
  - "high": Question can be fully answered using only the knowledge base content
  - "partial": Question is related but requires some knowledge beyond what's provided
